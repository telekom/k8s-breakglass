cluster:
  clusterID: tenant-b-virtual-test
  tenant: tenant-b
  environment: development
  # Optional cluster identification fields
  # site: eu-west
  # location: eu-west-1
  
  # ==========================================
  # Authentication Configuration
  # ==========================================
  # Choose ONE of the following auth types:
  # - authType: Kubeconfig (default) - uses kubeconfigSecretRef
  # - authType: OIDC - uses either oidcAuth or oidcFromIdentityProvider
  
  # Default: Kubeconfig authentication
  # authType: Kubeconfig
  kubeconfigSecretRef:
    name: tenant-b-admin
    namespace: default
    # key: kubeconfig  # Optional, defaults to "kubeconfig"
  
  # ==========================================
  # OIDC Authentication (when authType=OIDC)
  # ==========================================
  # Option 1: Direct OIDC configuration
  # authType: OIDC
  # oidcAuth:
  #   # Required: OIDC issuer URL
  #   issuerURL: https://keycloak.example.com/realms/kubernetes
  #   # Required: OIDC client ID
  #   clientID: breakglass-controller
  #   # Required: Target cluster API server URL
  #   server: https://api.cluster.example.com:6443
  #   # Required: Client secret reference
  #   clientSecretRef:
  #     name: oidc-client-secret
  #     namespace: breakglass-system
  #     key: client-secret
  #   # Optional: CA certificate for cluster API server
  #   caSecretRef:
  #     name: cluster-ca
  #     namespace: breakglass-system
  #     key: ca.crt
  #   # Optional: Token audience (defaults to server URL)
  #   audience: https://api.cluster.example.com:6443
  #   # Optional: Additional OIDC scopes
  #   scopes:
  #     - groups
  #     - email
  #   # Optional: Skip TLS verification (not recommended for production)
  #   insecureSkipTLSVerify: false
  #   # Optional: Token exchange configuration (RFC 8693)
  #   tokenExchange:
  #     enabled: false
  #     subjectTokenSecretRef:
  #       name: subject-token-secret
  #       namespace: breakglass-system
  #       key: token
  #     resource: https://api.cluster.example.com:6443
  
  # Option 2: OIDC from IdentityProvider reference
  # authType: OIDC
  # oidcFromIdentityProvider:
  #   # Required: Name of the IdentityProvider resource
  #   name: my-keycloak-idp
  #   # Required: Target cluster API server URL
  #   server: https://api.cluster.example.com:6443
  #   # Optional: Override client ID from IdentityProvider
  #   clientID: cluster-specific-client
  #   # Optional: Client secret for this cluster
  #   clientSecretRef:
  #     name: cluster-client-secret
  #     namespace: breakglass-system
  #   # Optional: CA certificate for cluster API server
  #   caSecretRef:
  #     name: cluster-ca
  #     namespace: breakglass-system
  #   # Optional: Skip TLS verification
  #   insecureSkipTLSVerify: false
  
  # ==========================================
  # Additional Options
  # ==========================================
  # Restrict which IdentityProviders can authenticate for this cluster
  # identityProviderRefs:
  #   - my-keycloak-idp
  
  # Client rate limiting
  # qps: 100
  # burst: 200
  
  blockSelfApproval: false
  allowedApproverDomains: []

escalations: []
  # - name: sample-escalation
  #   allowed:
  #     clusters:
  #       - breakglass-hub
  #     groups:
  #       - dev
  #       - senior-ops
  #   escalatedGroup: breakglass-create-all
  #   approvers:
  #     groups:
  #       - senior-ops
  #       - flm-on-duty  # FLM group added as fallback
  #     hiddenFromUI:
  #       - flm-on-duty  # Hide FLM from UI and notifications (fallback only)
  #   # Per-escalation optional fields:
  #   allowedApproverDomains:
  #     - example.org
  #   blockSelfApproval: true
  #   disableNotifications: false
  #   notificationExclusions:
  #     users:
  #       - automation@example.com
  #       - bot@example.com
  #     groups:
  #       - automated-services
  #   requestReason:
  #     mandatory: true
  #     description: "Please provide a short justification or ticket ID"
  #   maxValidFor: 1h
  #   retainFor: 24h
  #   idleTimeout: 30m
  #   # Multi-IDP: Restrict escalation to specific identity providers (optional)
  #   allowedIdentityProviders:
  #     - corporate-oidc
  #     - external-keycloak
  #   # Note: If allowedIdentityProviders is not set or empty, all IDPs are allowed

# Multi-IDP Identity Provider Configuration Examples:
#
# For single-IDP mode (backward compatible):
# - No IdentityProvider resources needed, uses default auth configuration
#
# For multi-IDP mode:
# - Create IdentityProvider CRs with different authentication providers
# - Each escalation can restrict to specific IDPs via allowedIdentityProviders
#
# Example multi-IDP CRs (create separately, not through this chart):
#
#   apiVersion: breakglass.telekom.de/v1alpha1
#   kind: IdentityProvider
#   metadata:
#     name: corporate-oidc
#   spec:
#     issuer: https://auth.corp.example.com
#     clientID: my-client-id
#     clientSecret:
#       secretRef:
#         name: corporate-oidc-secret
#     disabled: false
#
#   apiVersion: breakglass.telekom.de/v1alpha1
#   kind: IdentityProvider
#   metadata:
#     name: external-keycloak
#   spec:
#     issuer: https://keycloak.external.example.com/realms/breakglass
#     clientID: keycloak-client
#     clientSecret:
#       secretRef:
#         name: keycloak-secret
#     disabled: false
