# SPDX-FileCopyrightText: 2025 Deutsche Telekom AG
#
# SPDX-License-Identifier: Apache-2.0

apiVersion: breakglass.t-caas.telekom.com/v1alpha1
kind: ClusterConfig
metadata:
  name: {{ default .Values.cluster.clusterID .Values.cluster.clusterID | trunc 63 | trimSuffix "-" }}
  namespace: {{ .Release.Namespace }}
spec:
  clusterID: {{ .Values.cluster.clusterID }}
  tenant: {{ .Values.cluster.tenant }}
  environment: {{ .Values.cluster.environment }}
  kubeconfigSecretRef:
    name: {{ .Values.cluster.kubeconfigSecretRef.name }}
    namespace: {{ .Values.cluster.kubeconfigSecretRef.namespace }}
  blockSelfApproval: {{ default false .Values.cluster.blockSelfApproval }}
  allowedApproverDomains:
{{ toYaml .Values.cluster.allowedApproverDomains | indent 4 }}
